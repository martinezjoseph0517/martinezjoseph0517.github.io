{
  "hash": "850bc2cb7e91187f5c24ea7b392db28c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Assignment 2 (In Progress)\"\nformat: html\n---\n\n[**October 2nd, 2025**]{.underline}\n\nThe following visualizations are done using data from the happy planet index [Explore the data - Happy Planet Index](https://happyplanetindex.org/countries/).\n\n**Basic Plot of Life Expectancy vs Carbon Footprint**\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### Basic Scatter Plot for Life Expectancy vs Carbon Footprint\n# Installing hpi & Load library\n\n\nlibrary(readxl)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'readxl' was built under R version 4.5.2\n```\n\n\n:::\n\n```{.r .cell-code}\nHPI_dataset <- read_excel(\"C:/Users/marti/OneDrive/Desktop/test/HPI_dataset.xlsx\", \n    sheet = \"1. All countries\", \n    range = \"A9:L158\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nNew names:\nâ€¢ `` -> `...4`\n```\n\n\n:::\n\n```{.r .cell-code}\nhpi <- HPI_dataset\nView(hpi)\n\nnames(hpi)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"HPI rank\"                          \"Country\"                          \n [3] \"ISO\"                               \"...4\"                             \n [5] \"Continent\"                         \"Population (thousands)\"           \n [7] \"Life Expectancy (years)\"           \"Ladder of life (Wellbeing) (0-10)\"\n [9] \"Carbon Footprint (tCO2e)\"          \"HPI\"                              \n[11] \"CO2 threshold for year  (tCO2e)\"   \"GDP per capita ($)\"               \n```\n\n\n:::\n\n```{.r .cell-code}\n## Start plotting from basics \n# Quick look at the variable names\n# names(hpi)\n\n# Clean up column names for easier reference (optional)\ncolnames(hpi) <- make.names(colnames(hpi))\n\n# Extract the columns you need\nx <- hpi$`Life.Expectancy..years.`   # adjust name if slightly di ``fferent\ny <- hpi$`Carbon.Footprint..tCO2e.`\n\n# Basic sanity check\n# head(cbind(x, y))\n\n# Create scatterplot\nplot(x, y,\n     main = \"Life Expectancy vs Carbon Footprint\",\n     xlab = \"Life Expectancy (years)\",\n     ylab = \"Carbon Footprint (tCOâ‚‚e)\",\n     pch = 19, col = \"skyblue\", cex = 1.3)\n```\n\n::: {.cell-output-display}\n![](assignment2_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Exercise: Can you generate these charts individually?  Try these functions \n# using another dataset. Be sure to work on the layout and margins\n```\n:::\n\n\n**Scatterplot**\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Scatterplot\n# Note the incremental additions\n# Installing hpi & Load library\nlibrary(readxl)\nHPI_dataset <- read_excel(\"C:/Users/marti/OneDrive/Desktop/test/HPI_dataset.xlsx\", \n    sheet = \"1. All countries\", \n    range = \"A9:L158\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nNew names:\nâ€¢ `` -> `...4`\n```\n\n\n:::\n\n```{.r .cell-code}\nhpi <- HPI_dataset\nView(hpi)\nnames(hpi)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"HPI rank\"                          \"Country\"                          \n [3] \"ISO\"                               \"...4\"                             \n [5] \"Continent\"                         \"Population (thousands)\"           \n [7] \"Life Expectancy (years)\"           \"Ladder of life (Wellbeing) (0-10)\"\n [9] \"Carbon Footprint (tCO2e)\"          \"HPI\"                              \n[11] \"CO2 threshold for year  (tCO2e)\"   \"GDP per capita ($)\"               \n```\n\n\n:::\n\n```{.r .cell-code}\ncolnames(hpi) <- make.names(colnames(hpi))\n\nx <- hpi$`HPI.rank`   # chose to compare HPI rank to a few other factors\ny1 <- hpi$`Carbon.Footprint..tCO2e.` # testing for correlation.\ny2 <- hpi$`Life.Expectancy..years.` # testing for correlation.\n\n# Setting label orientation, margins c(bottom, left, top, right) & text size\npar(las=1, mar=c(4, 4, 2, 4), cex=.7, bg = \"grey18\") \nplot.new()\n\nplot.window(range(x, na.rm=TRUE), range(c(y1, y2), na.rm=TRUE))\n# What is the first number standing for? The Bottom Axis.\n# X-axis based on HPI rank\naxis(1, at=seq(min(x, na.rm=TRUE), max(x, na.rm=TRUE), by=20), col.axis = \"chartreuse2\")\n\n# Y-axes based on the combined range of y1 and y2\naxis(2, at=seq(0, 90, by=10), col.axis = \"chartreuse2\")\naxis(4, at=seq(0, 90, by=10), col.axis = \"chartreuse2\")\n\nlines(x, y1, col=\"cyan1\", lwd=2)\nlines(x, y2, col=\"violetred2\", lwd=2)\npoints(x, y1, pch=18, cex=2, col=\"cyan1\") # Try different cex value? I did not like any othercex value, so I just changed the pch instead.  \npoints(x, y2, pch=20, bg=\"chartreuse2\", cex=2, col=\"violetred2\")  # Changed background color to grey18.\npar(col=\"chartreuse2\", fg= \"chartreuse2\", col.axis=\"chartreuse2\")\n\nbox(bty=\"u\")\nmtext(\"HPI Rank\", side=1, line=2, cex=0.8)\nmtext(\"Carbon Footprint (tCO2e)\", side=2, line=2, las=0, cex=0.8)\nmtext(\"Life Expectancy (years)\", side=4, line=2, las=0, cex=0.8)\ntext(4, 5, \"Bird 131\")\n```\n\n::: {.cell-output-display}\n![](assignment2_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n```{.r .cell-code}\npar(mar=c(5.1, 4.1, 4.1, 2.1), col=\"chartreuse2\" , fg= \"chartreuse2\", col.axis=\"chartreuse2\")\n\n#I was not really happy with how this turned out, I may redo this again with different variables.\n```\n:::\n\n\n**Histogram**\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Histogram of Population\nlibrary(readxl)\nHPI_dataset <- read_excel(\"C:/Users/marti/OneDrive/Desktop/test/HPI_dataset.xlsx\", \n    sheet = \"1. All countries\", range = \"A9:L158\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nNew names:\nâ€¢ `` -> `...4`\n```\n\n\n:::\n\n```{.r .cell-code}\nhpi <- HPI_dataset\n\nY <- hpi$`Population (thousands)`\nY <- na.omit(Y)\n\n# Use log10 scale because populations vary drastically\nY_log <- log10(Y)\n\n# Plot\npar(bg=\"grey18\", \n    mar=c(4.5, 4.5, 3.1, 1),\n    col.axis=\"chartreuse2\", \n    col.lab=\"chartreuse2\", \n    col.main=\"chartreuse2\")\n\nhist(Y_log,\n     breaks=15,\n     col=\"deepskyblue3\",\n     border=\"white\",\n     freq=FALSE,\n     main=\"Distribution of Country Populations\",\n     xlab=\"Population in thousands\",\n     ylab=\"Density\")\n\nlines(density(Y_log), col=\"chartreuse2\", lwd=2)\nrug(Y_log, col=\"white\")\n```\n\n::: {.cell-output-display}\n![](assignment2_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# I am not yet satisfied with this, may go back and redo.\n```\n:::\n\n\n**Barplot**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\n\nHPI_dataset <- read_excel(\"C:/Users/marti/OneDrive/Desktop/test/HPI_dataset.xlsx\", \n    sheet = \"1. All countries\", \n    range = \"A9:L158\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nNew names:\nâ€¢ `` -> `...4`\n```\n\n\n:::\n\n```{.r .cell-code}\nhpi <- HPI_dataset\n\n# Make column names R-safe\nnames(hpi) <- make.names(names(hpi))\n\n# Check column names (see the exact GDP column)\nprint(names(hpi))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"HPI.rank\"                          \"Country\"                          \n [3] \"ISO\"                               \"...4\"                             \n [5] \"Continent\"                         \"Population..thousands.\"           \n [7] \"Life.Expectancy..years.\"           \"Ladder.of.life..Wellbeing...0.10.\"\n [9] \"Carbon.Footprint..tCO2e.\"          \"HPI\"                              \n[11] \"CO2.threshold.for.year...tCO2e.\"   \"GDP.per.capita....\"               \n```\n\n\n:::\n\n```{.r .cell-code}\n# Aggregate mean GDP per capita by continent\ngdp_by_continent <- aggregate(`GDP.per.capita....` ~ Continent,\n                              data = hpi,\n                              FUN = mean,\n                              na.rm = TRUE)\n\n# Rename columns for convenience\nnames(gdp_by_continent) <- c(\"Continent\", \"GDP.per.capita\")\n\n# ðŸ—ºï¸ Map numeric continent codes to names\ncontinent_names <- c(\n  \"1\" = \"Latin America\",\n  \"2\" = \"N. America & Oceania\",\n  \"3\" = \"Western Europe\",\n  \"4\" = \"Middle East\",\n  \"5\" = \"Africa\",\n  \"6\" = \"South Asia\",\n  \"7\" = \"Eastern Europe & Central Asia\",\n  \"8\" = \"East Asia\"\n)\n\n# Replace codes with readable names\ngdp_by_continent$Continent <- continent_names[as.character(gdp_by_continent$Continent)]\n\n# Sort continents by GDP (descending)\ngdp_by_continent <- gdp_by_continent[order(gdp_by_continent$GDP.per.capita, decreasing = TRUE), ]\n\n# ---- Barplot ----\npar(mar = c(8, 4, 3, 2))  # more space at bottom\nmidpts <- barplot(gdp_by_continent$GDP.per.capita,\n                  names.arg = gdp_by_continent$Continent,\n                  col = gray(seq(0.3, 0.8, length.out = nrow(gdp_by_continent))),\n                  main = \"Average GDP per Capita by Continent\",\n                  ylab = \"Avg GDP per Capita (USD)\",\n                  ylim = c(0, max(gdp_by_continent$GDP.per.capita) * 1.1),\n                  las = 2)  # rotate labels vertically\n\n# Add GDP values inside bars\ntext(midpts, gdp_by_continent$GDP.per.capita / 2,\n     labels = round(gdp_by_continent$GDP.per.capita, 0),\n     col = \"white\", cex = 0.8)\n```\n\n::: {.cell-output-display}\n![](assignment2_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n**Boxplot**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\n\n# --- Load Data ---\nHPI_dataset <- read_excel(\"C:/Users/marti/OneDrive/Desktop/test/HPI_dataset.xlsx\", \n    sheet = \"1. All countries\", \n    range = \"A9:L158\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nNew names:\nâ€¢ `` -> `...4`\n```\n\n\n:::\n\n```{.r .cell-code}\nhpi <- HPI_dataset\n\n# Make column names R-safe\nnames(hpi) <- make.names(names(hpi))\n\n# ðŸ—ºï¸ Map numeric continent codes to names\ncontinent_names <- c(\n  \"1\" = \"Latin America\",\n  \"2\" = \"N. America & Oceania\",\n  \"3\" = \"W. Europe\",\n  \"4\" = \"Middle East\",\n  \"5\" = \"Africa\",\n  \"6\" = \"S. Asia\",\n  \"7\" = \"E. Europe & C. Asia\",\n  \"8\" = \"E. Asia\"\n)\n\n# Apply mapping to replace numbers with names\nhpi$Continent <- continent_names[as.character(hpi$Continent)]\n\n# --- Boxplot: Life Expectancy by Continent ---\npar(mar = c(8, 4, 3, 2))  # add space for labels\n\nboxplot(hpi$`Life.Expectancy..years.` ~ hpi$Continent,\n        col = gray(seq(0.3, 0.8, length.out = length(unique(hpi$Continent)))),\n        main = \"Life Expectancy by Continent\",\n        ylab = \"Life Expectancy (Years)\",\n        xlab = \"\",\n        las = 2,   # rotate x-axis labels\n        outline = TRUE)\n```\n\n::: {.cell-output-display}\n![](assignment2_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n**Persp**\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load data\nlibrary(readxl)\nhpi <- read_excel(\"C:/Users/marti/OneDrive/Desktop/test/HPI_dataset.xlsx\", \n                  sheet = \"1. All countries\", \n                  range = \"A9:L158\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nNew names:\nâ€¢ `` -> `...4`\n```\n\n\n:::\n\n```{.r .cell-code}\n# Make R-safe column names\nnames(hpi) <- make.names(names(hpi))\n\n# Pick variables\nx <- hpi$GDP.per.capita....\ny <- hpi$Carbon.Footprint..tCO2e.\nz <- hpi$Life.Expectancy..years.\n\n# Remove missing values\ncomplete_data <- na.omit(data.frame(x, y, z))\n\n# Define grid for persp()\nx_seq <- seq(min(complete_data$x), max(complete_data$x), length = 30)\ny_seq <- seq(min(complete_data$y), max(complete_data$y), length = 30)\n\n# Interpolate z values on the grid\nz_grid <- outer(x_seq, y_seq, function(a, b) {\n  # Use a smooth function (linear model for simplicity)\n  model <- lm(z ~ x + y, data = complete_data)\n  predict(model, newdata = data.frame(x = a, y = b))\n})\n\n# Fix NA values\nz_grid[is.na(z_grid)] <- min(complete_data$z, na.rm = TRUE)\n\n# Plot\npar(bg = \"white\", mar = c(1, 1, 1, 1))\npersp(x_seq, y_seq, z_grid,\n      theta = 30, phi = 25,\n      expand = 0.6,\n      col = \"skyblue3\",\n      shade = 0.5,\n      xlab = \"GDP per Capita\",\n      ylab = \"Ecological Footprint (gha)\",\n      zlab = \"Life Expectancy (years)\",\n      ticktype = \"detailed\")\n```\n\n::: {.cell-output-display}\n![](assignment2_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n**Piechart**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\n\n# Load the data\nHPI_dataset <- read_excel(\"C:/Users/marti/OneDrive/Desktop/test/HPI_dataset.xlsx\", \n    sheet = \"1. All countries\", \n    range = \"A9:L158\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nNew names:\nâ€¢ `` -> `...4`\n```\n\n\n:::\n\n```{.r .cell-code}\nhpi <- HPI_dataset\nnames(hpi) <- make.names(names(hpi))  # make column names R-safe\n\n# Map numeric continent codes to names\ncontinent_names <- c(\n  \"1\" = \"Latin America\",\n  \"2\" = \"N. America & Oceania\",\n  \"3\" = \"W. Europe\",\n  \"4\" = \"Middle East\",\n  \"5\" = \"Africa\",\n  \"6\" = \"S. Asia\",\n  \"7\" = \"E. Europe & C. Asia\",\n  \"8\" = \"E. Asia\"\n)\n\n# Replace numeric codes with names\nhpi$Continent <- continent_names[as.character(hpi$Continent)]\n\n# Aggregate total carbon footprint per continent\ncarbon_by_continent <- aggregate(Carbon.Footprint..tCO2e. ~ Continent,\n                                 data = hpi,\n                                 FUN = sum,\n                                 na.rm = TRUE)\n\n# Sort for cleaner labeling\ncarbon_by_continent <- carbon_by_continent[order(carbon_by_continent$Carbon.Footprint..tCO2e., decreasing = TRUE), ]\n\n# Create named vector for pie()\npie.values <- carbon_by_continent$Carbon.Footprint..tCO2e.\nnames(pie.values) <- carbon_by_continent$Continent\n\n# ðŸŽ¨ Pie chart\npar(mar = c(0, 2, 1, 2), xpd = TRUE)\npie(pie.values,\n    col = gray(seq(0.3, 1.0, length.out = length(pie.values))),\n    main = \"Total Carbon Footprint by Continent (tCOâ‚‚e)\",\n    clockwise = TRUE)\n```\n\n::: {.cell-output-display}\n![](assignment2_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n",
    "supporting": [
      "assignment2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}