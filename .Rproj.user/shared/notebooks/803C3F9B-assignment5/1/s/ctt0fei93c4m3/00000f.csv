"0","#| echo: false"
"0","#| massage: false"
"0","#| warning: false"
"0","#| output: false"
"0",""
"0","library(readxl)"
"0","library(dplyr)"
"0","library(lubridate)"
"0","library(ggplot2)"
"0","library(plotly)"
"0",""
"0","# Load dataset"
"0","demo_dataset <- read_excel(""C:/Users/marti/OneDrive/Desktop/test/demolition_data_report.xlsx"", "
"0","                           sheet = ""Demolition Report"", range = ""A1:G2286"")"
"0",""
"0","# Convert date column to Date type"
"0","demo_dataset$date <- as.Date(demo_dataset$date)"
"0",""
"0","# Ensure 'incidents' column is numeric"
"0","demo_dataset$incidents <- as.numeric(demo_dataset$incidents)"
"0",""
"0","# Summarize by date"
"0","daily_displacement <- demo_dataset %>%"
"0","  group_by(date) %>%"
"0","  summarise("
"0","    Total_Displaced = sum(displacedPeople, na.rm = TRUE),"
"0","    Total_Incidents = sum(incidents, na.rm = TRUE)"
"0","  ) %>%"
"0","  arrange(date)"
"0",""
"0","# Build ggplot object"
"0","p <- ggplot(daily_displacement, aes(x = date, y = Total_Displaced,"
"0","                                    size = Total_Incidents,"
"0","                                    text = paste(""Date:"", date,"
"0","                                                 ""<br>Total Displaced:"", Total_Displaced,"
"0","                                                 ""<br>Incidents:"", Total_Incidents))) +"
"0","  geom_point(color = ""burlywood4"", alpha = 0.7) +"
"0","  geom_smooth(method = ""loess"", se = FALSE, color = ""darkred"") +"
"0","  scale_size_area(max_size = 12) +  # size of bubbles"
"0","  labs("
"0","    title = ""W. Bank/E. Jerusalem Palestinians Displaced Over Time"","
"0","    subtitle = ""Bubble size = Number of incidents"","
"0","    x = ""Date"","
"0","    y = ""Total People Displaced"","
"0","    size = ""Incidents"""
"0","  ) +"
"0","  theme_minimal(base_size = 14) +"
"0","  theme("
"0","    panel.background = element_rect(fill = ""bisque"", color = NA),"
"0","    plot.background = element_rect(fill = ""bisque""),"
"0","    axis.title = element_text(color = ""burlywood4""),"
"0","    axis.text = element_text(color = ""burlywood4""),"
"0","    plot.title = element_text(color = ""burlywood4"", hjust = 0.5),"
"0","    plot.subtitle = element_text(color = ""burlywood4"", hjust = 0.5)"
"0","  )"
"0",""
"0","# Convert to interactive Plotly plot"
"0","ggplotly(p, tooltip = ""text"")"
