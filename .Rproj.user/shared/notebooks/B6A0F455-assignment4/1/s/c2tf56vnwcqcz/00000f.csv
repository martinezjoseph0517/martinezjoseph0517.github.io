"0","#| echo: false"
"0","#| message: false"
"0","#| warning: false"
"0","# Started with a basic data table using library(DT). Slowly made troubleshoots and edits consulting the following resources: "
"0","# - https://bookdown.org/kdonovan125/ibis_data_analysis_r4/working-with-tables-in-r.html"
"0","# - https://forum.posit.co/"
"0","# - chatgpt"
"0",""
"0","# Load libraries"
"0","library(WDI)"
"0","library(dplyr)"
"0","library(janitor)"
"0","library(countrycode)"
"0","library(DT)"
"0",""
"0","# Pull migration data"
"0","migration_raw <- WDI("
"0","  country  = ""all"","
"0","  indicator = c("
"0","    migrants_total = ""SM.POP.TOTL"","
"0","    migrants_pct   = ""SM.POP.TOTL.ZS"""
"0","  ),"
"0","  start = 2020, end = 2020, extra = TRUE"
"0",")"
"0",""
"0","migration <- migration_raw %>%"
"0","  clean_names() %>%"
"0","  filter(region != ""Aggregates"") %>%"
"0","  mutate(continent = countrycode(iso3c, ""iso3c"", ""continent""))"
"0",""
"0","# Population (2020)"
"0","pop2020 <- WDI(""all"", ""SP.POP.TOTL"", start = 2020, end = 2020, extra = TRUE) %>%"
"0","  clean_names() %>%"
"0","  select(iso3c, sp_pop_totl)"
"0",""
"0","# Join datasets"
"0","df <- migration %>%"
"0","  select(iso3c, country, migrants_total, migrants_pct, continent) %>%"
"0","  left_join(pop2020, by = ""iso3c"") %>%"
"0","  filter(!is.na(migrants_pct), !is.na(sp_pop_totl))"
"0",""
"0","# Prepare display table with renamed columns"
"0","display_df <- df %>%"
"0","  select(country, continent, migrants_total, migrants_pct, sp_pop_totl) %>%"
"0","  rename("
"0","    Country = country,"
"0","    Continent = continent,"
"0","    `Total Migrants` = migrants_total,"
"0","    `% of Population Migrants` = migrants_pct,"
"0","    `Total Population (2020)` = sp_pop_totl"
"0","  )"
"0",""
"0",""
"0","# Create interactive DT table (dark-mode)"
"0","datatable("
"0","  display_df,"
"0","  caption = ""Table 1 â€” Migrant Population by Country (2020)"","
"0","  options = list(pageLength = 20, scrollX = TRUE),"
"0","  escape = FALSE,"
"0","  class = ""cell-border stripe hover"""
"0",") %>%"
"0","  formatStyle("
"0","    columns = names(display_df),"
"0","    backgroundColor = ""white"","
"0","    color = ""black"""
"0","  )"
